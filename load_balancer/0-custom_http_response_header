#!/usr/bin/env bash
# Function to set up Nginx
setup_nginx() {
    # Update the package list and install Nginx
    sudo apt update -y
    sudo apt install nginx -y

    # Get the current hostname of the server
    hostname=$(hostname)

    # Create a new Nginx configuration with a custom header
    echo "server {
        listen 80;

        # Custom header with the server's hostname
        add_header X-Served-By \"$hostname\" always;

        location / {
            root /var/www/html;
            index index.html;
        }
    }" | sudo tee /etc/nginx/sites-available/default > /dev/null

    # Restart Nginx to apply the changes
    sudo systemctl restart nginx
}

# Call the function to set up Nginx
setup_nginx

# Print a message confirming the script has finished
echo "Nginx has been configured with a custom header 'X-Served-By' containing the hostname '$hostname'."

