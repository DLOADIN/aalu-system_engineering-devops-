#!/bin/bash
# Function to set up Nginx

setup_nginx() {
    # Update the package list and install Nginx
    sudo apt update -y
    sudo apt install nginx -y
    
    # Set the hostname to match the server name (e.g., student_id-web-01)
    # Assumes the hostname is already correctly set in the server name
    hostname=$(hostname)
    
    # Configure Nginx to add the X-Served-By header with the hostname value
    echo "
    server {
        listen 80;
        
        # Custom header with the server's hostname
        add_header X-Served-By \"$hostname\";

        location / {
            root /var/www/html;
            index index.html;
        }
    }
    " | sudo tee /etc/nginx/sites-available/default > /dev/null

    # Restart Nginx to apply changes
    sudo systemctl restart nginx
}

# Call the function to set up Nginx
setup_nginx

# Print a message confirming the script has finished
echo "Nginx has been configured with a custom header 'X-Served-By' containing the hostname '$hostname'."

